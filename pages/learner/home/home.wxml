<!-- pages/learner/home/home.wxml -->
<view class="container home-page-container"> <!-- æ”¹ä¸º home-page-container ä»¥ä¾¿æ›´ç²¾ç¡®æ§åˆ¶ -->
    <!-- é—®å€™è¯­ -->
    <view class="greeting-section">
        <text class="h1">ğŸ‘‹ ä½ å¥½, {{userName}}!</text>
        <text class="p sub-greeting">ä»Šå¤©ä¹Ÿè¦åŠªåŠ›å­¦ä¹ æ‰‹è¯­å“¦~</text>
    </view>

    <!-- é”™è¯¯æç¤ºå ä½ -->
    <view wx:if="{{errorMessage}}" class="error-message">{{errorMessage}}</view>

    <!-- æ¯æ—¥æŒ‘æˆ˜å¡ç‰‡ -->
    <view class="card daily-challenge-card" bindtap="navigateToDailyChallenge">
        <view class="card-header">
            <text class="h3">æ¯æ—¥æŒ‘æˆ˜</text>
            <text class="text-sm streak-text">å·²è¿ç»­æ‰“å¡ {{dashboardData.checkInStreak}} å¤©</text>
        </view>
        <text class="p card-description">æŒ‘æˆ˜ä»Šæ—¥ä»½çš„æ‰‹è¯­è¯æ±‡ï¼Œçœ‹çœ‹ä½ çš„æŒæ¡ç¨‹åº¦å§ï¼</text>
        <button class="btn btn-secondary btn-card-action">å¼€å§‹æŒ‘æˆ˜</button> <!-- ç»Ÿä¸€æŒ‰é’®ç±»å -->
    </view>

    <!-- å­¦ä¹ è¿›åº¦å¡ç‰‡ -->
    <text class="section-title h2">å­¦ä¹ è¿›åº¦</text>
    <view class="card progress-card">
        <view class="card-header"> <!-- å¤ç”¨ card-header ç»“æ„ -->
            <text class="font-bold text-dark">æœ¬å‘¨å­¦ä¹ æ—¶é•¿</text>
            <text class="text-accent font-bold study-hours">{{dashboardData.weeklyStudyHours}} å°æ—¶</text>
        </view>
        <view class="line-chart-container">
             <!-- ä½¿ç”¨ ec-canvas ç»„ä»¶ -->
        <ec-canvas id="learn-progress-chart" canvas-id="learn-progress-canvas" ec="{{ ec }}"></ec-canvas>
        <view class="chart-labels">
            <!-- æ ‡ç­¾å¯ä»¥æ ¹æ®å®é™…æ•°æ®åŠ¨æ€ç”Ÿæˆï¼Œæˆ–ä¿æŒé™æ€ -->
            <text wx:for="{{dashboardData.dailyStudyDataPoints}}" wx:key="day" wx:if="{{dashboardData.dailyStudyDataPoints.length > 0}}">{{item.dayShort || item.day}}</text>
            <!-- æˆ–è€…é™æ€æ ‡ç­¾ -->
            <text wx:if="{{!dashboardData.dailyStudyDataPoints || dashboardData.dailyStudyDataPoints.length === 0}}">å‘¨ä¸€</text>
            <text wx:if="{{!dashboardData.dailyStudyDataPoints || dashboardData.dailyStudyDataPoints.length === 0}}">å‘¨äºŒ</text>
            <!-- ... å…¶ä»–é™æ€æ ‡ç­¾ ... -->
        </view>
            <view class="chart-labels">
                <text>å‘¨ä¸€</text><text>å‘¨äºŒ</text><text>å‘¨ä¸‰</text><text>å‘¨å››</text><text>å‘¨äº”</text><text>å‘¨å…­</text><text>å‘¨æ—¥</text>
            </view>
        </view>
    </view>

    <!-- å¿«é€Ÿè®¿é—®å¡ç‰‡ -->
    <text class="section-title h2">å¿«é€Ÿè®¿é—®</text>
    <view class="card quick-access-card">
        <view class="quick-access-item" bindtap="navigateToEncyclopedia">
            <view class="item-content">
                <image class="item-icon" src="/assets/images/icon-book.png" mode="aspectFit"/>
                <text class="text-dark font-bold item-text">æ‰‹åŠ¿ç™¾ç§‘</text>
            </view>
            <image class="item-arrow" src="/assets/images/icon-chevron-right.png" mode="aspectFit"/>
        </view>
        <view class="hr"></view>
        <view class="quick-access-item" bindtap="navigateToErrorReview">
            <view class="item-content">
                <image class="item-icon" src="/assets/images/icon-learn.png" mode="aspectFit"/>
                <text class="text-dark font-bold item-text">é”™é¢˜å›é¡¾</text>
            </view>
            <image class="item-arrow" src="/assets/images/icon-chevron-right.png" mode="aspectFit"/>
        </view>
    </view>

    <!-- æ¨èæŒ‘æˆ˜å¡ç‰‡ -->
    <text class="section-title h2">æ¨èæŒ‘æˆ˜</text>
    <view class="card recommended-challenge-card" wx:if="{{dashboardData.recommendedChallenge}}">
        <text class="text-dark font-bold challenge-title">æ‰‹è¯­ "{{dashboardData.recommendedChallenge.title}}"</text>
        <text class="p challenge-description">{{dashboardData.recommendedChallenge.description}}</text>
        <button class="btn btn-secondary btn-sm btn-card-action" bindtap="practiceRecommendedChallenge">å»ç»ƒä¹ </button> <!-- ç»Ÿä¸€æŒ‰é’®ç±»å -->
    </view>
</view>